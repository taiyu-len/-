#!/bin/bash -u
# Downloads from vimeo properly using youtube-dl

# for some reason it always tries to fix files even if they have already been downloaded
ytdl_opt+=(--fixup never)

# youtube-dl never succeeds at retrying fragments, will try all remaining fragments
# and then ``finishes'' the download preventing it from being continued later.
hash youtube-dl && youtube-dl "${ytdl_opt[@]}" "$@" | {
	while read line
	do [[ "$line" = *Retrying\ fragment* ]] && exit 143 || printf "%s\n" "$line"
	done
}
